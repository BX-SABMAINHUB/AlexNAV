<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlexBrowser Ultimate | Privacy Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* * ==========================================
         * N칔CLEO CSS - ALEXBROWSER UI ENGINE v9.0
         * ==========================================
         */

        :root {
            /* PALETA DE COLORES NEON-DARK */
            --bg-app: #09090b;
            --bg-panel: #18181b;
            --bg-input: #27272a;
            --accent: #6366f1; /* Indigo Neon */
            --accent-glow: rgba(99, 102, 241, 0.4);
            --text-main: #f4f4f5;
            --text-muted: #a1a1aa;
            --border: #3f3f46;
            --danger: #ef4444;
            --success: #10b981;
            
            /* DIMENSIONES */
            --header-height: 80px;
            --tab-height: 35px;
            --anim-speed: 0.2s;
        }

        /* RESET & BASE */
        * { box-sizing: border-box; user-select: none; outline: none; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-app);
            color: var(--text-main);
            font-family: 'Segoe UI', system-ui, sans-serif;
            height: 100vh; overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* SCROLLBAR PERSONALIZADO */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-app); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

        /* ==========================================
         * ZONA SUPERIOR (HEADER & TABS)
         * ==========================================
         */
        .browser-chrome {
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border);
            display: flex; flex-direction: column;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            z-index: 100;
        }

        /* BARRA DE PESTA칌AS */
        .tabs-bar {
            height: 40px;
            display: flex; align-items: flex-end;
            padding: 0 10px; gap: 5px;
            background: #000;
            overflow-x: auto;
        }
        .tab {
            background: #222;
            color: #888;
            padding: 8px 15px;
            border-radius: 10px 10px 0 0;
            font-size: 12px;
            display: flex; align-items: center; gap: 10px;
            cursor: pointer;
            transition: var(--anim-speed);
            max-width: 200px; min-width: 120px;
            position: relative;
            border: 1px solid transparent;
        }
        .tab:hover { background: #333; color: #ccc; }
        .tab.active {
            background: var(--bg-panel);
            color: var(--text-main);
            border-top: 2px solid var(--accent);
            font-weight: bold;
        }
        .tab-close {
            margin-left: auto; width: 16px; height: 16px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
        }
        .tab-close:hover { background: var(--danger); color: white; }
        .new-tab-btn {
            padding: 8px; color: var(--text-muted); cursor: pointer;
        }
        .new-tab-btn:hover { color: var(--accent); }

        /* BARRA DE NAVEGACI칍N (OMNIBOX) */
        .nav-toolbar {
            height: 50px;
            display: flex; align-items: center;
            padding: 0 15px; gap: 15px;
        }

        .nav-controls { display: flex; gap: 8px; }
        .icon-btn {
            width: 34px; height: 34px; border-radius: 8px;
            background: transparent; border: 1px solid transparent;
            color: var(--text-main); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; transition: var(--anim-speed);
        }
        .icon-btn:hover { background: rgba(255,255,255,0.1); }
        .icon-btn:active { transform: scale(0.95); }

        /* CAJA DE URL INTELIGENTE */
        .omnibox-container {
            flex: 1; position: relative;
        }
        .omnibox {
            width: 100%; height: 36px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 0 45px 0 40px; /* Espacio para iconos */
            color: var(--text-main);
            font-family: 'Segoe UI', monospace; font-size: 13px;
            transition: var(--anim-speed);
        }
        .omnibox:focus {
            border-color: var(--accent);
            background: #000;
            box-shadow: 0 0 15px var(--accent-glow);
        }
        .site-info-icon {
            position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
            color: var(--success); font-size: 12px;
        }
        .search-action-icon {
            position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
            color: var(--accent); cursor: pointer;
        }

        /* ==========================================
         * 츼REA DE VISUALIZACI칍N (VIEWPORT)
         * ==========================================
         */
        .viewport-container {
            flex: 1; position: relative; background: #fff;
        }
        iframe.browser-view {
            width: 100%; height: 100%; border: none; display: none;
        }
        iframe.browser-view.active { display: block; }

        /* PANTALLA DE INICIO (ALEX START PAGE) */
        .alex-start-page {
            position: absolute; inset: 0;
            background: radial-gradient(circle at center, #1e1e24 0%, #000 100%);
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 50;
        }
        .alex-start-page.active { display: flex; }
        
        .start-logo {
            font-size: 4rem; font-weight: 800;
            background: linear-gradient(to right, #6366f1, #a855f7, #ec4899);
            -webkit-background-clip: text; color: transparent;
            margin-bottom: 30px; letter-spacing: -2px;
            text-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }
        .start-search {
            width: 600px; max-width: 90%;
            height: 60px; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 30px; padding: 0 30px;
            color: white; font-size: 18px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transition: 0.3s;
        }
        .start-search:focus {
            background: rgba(0,0,0,0.8);
            border-color: var(--accent);
            transform: scale(1.02);
        }
        
        /* ACCESOS R츼PIDOS */
        .quick-links {
            display: flex; gap: 20px; margin-top: 40px;
        }
        .q-link {
            width: 80px; height: 80px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s; color: var(--text-muted);
            text-decoration: none;
        }
        .q-link:hover { background: rgba(255,255,255,0.1); color: white; transform: translateY(-5px); }
        .q-icon { font-size: 24px; margin-bottom: 8px; }
        .q-text { font-size: 10px; }

        /* ==========================================
         * PANELES FLOTANTES (AJUSTES, HISTORIAL)
         * ==========================================
         */
        .overlay-panel {
            position: fixed; top: 80px; right: 0; bottom: 0;
            width: 400px; background: rgba(15, 15, 18, 0.95);
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--border);
            transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 200; display: flex; flex-direction: column;
        }
        .overlay-panel.open { transform: translateX(0); }
        
        .panel-header {
            padding: 20px; border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .panel-content { flex: 1; overflow-y: auto; padding: 20px; }

        /* Estilos de Ajustes */
        .setting-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .toggle-switch {
            width: 40px; height: 22px; background: #333;
            border-radius: 11px; position: relative; cursor: pointer;
        }
        .toggle-switch::after {
            content: ''; position: absolute; left: 2px; top: 2px;
            width: 18px; height: 18px; background: white; border-radius: 50%;
            transition: 0.2s;
        }
        .toggle-switch.active { background: var(--accent); }
        .toggle-switch.active::after { left: 20px; }

        /* Lista de Historial */
        .history-item {
            padding: 10px; border-radius: 8px;
            cursor: pointer; display: flex; align-items: center; gap: 10px;
        }
        .history-item:hover { background: rgba(255,255,255,0.05); }
        .h-time { font-size: 10px; color: var(--text-muted); }

        /* Notificaciones Toast */
        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: var(--accent); color: white;
            padding: 10px 25px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: 0.3s; opacity: 0; font-weight: bold; font-size: 12px;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    </style>
</head>
<body>

    <div class="browser-chrome">
        <div class="tabs-bar" id="tabs-container">
            </div>

        <div class="nav-toolbar">
            <div class="nav-controls">
                <button class="icon-btn" onclick="browser.goBack()"><i class="fas fa-arrow-left"></i></button>
                <button class="icon-btn" onclick="browser.goForward()"><i class="fas fa-arrow-right"></i></button>
                <button class="icon-btn" onclick="browser.reload()"><i class="fas fa-rotate-right"></i></button>
                <button class="icon-btn" onclick="browser.goHome()"><i class="fas fa-house"></i></button>
            </div>

            <div class="omnibox-container">
                <i class="fas fa-lock site-info-icon"></i>
                <input type="text" class="omnibox" id="url-input" placeholder="Buscar o escribir URL...">
                <i class="fas fa-magnifying-glass search-action-icon" onclick="browser.navigate()"></i>
            </div>

            <div class="nav-controls">
                <button class="icon-btn" onclick="ui.togglePanel('bookmarks')"><i class="fas fa-star"></i></button>
                <button class="icon-btn" onclick="ui.togglePanel('history')"><i class="fas fa-clock-rotate-left"></i></button>
                <button class="icon-btn" onclick="ui.togglePanel('settings')"><i class="fas fa-sliders"></i></button>
            </div>
        </div>
    </div>

    <div class="viewport-container" id="viewport">
        <div class="alex-start-page active" id="start-page">
            <div class="start-logo">AlexBrowser</div>
            <input type="text" class="start-search" placeholder="쯈u칠 quieres descubrir hoy?" onkeypress="if(event.key==='Enter') browser.navigate(this.value)">
            
            <div class="quick-links">
                <a class="q-link" onclick="browser.navigate('wikipedia.org')">
                    <i class="fab fa-wikipedia-w q-icon"></i>
                    <span class="q-text">Wiki</span>
                </a>
                <a class="q-link" onclick="browser.navigate('reddit.com')">
                    <i class="fab fa-reddit q-icon"></i>
                    <span class="q-text">Reddit</span>
                </a>
                <a class="q-link" onclick="browser.navigate('twitter.com')">
                    <i class="fab fa-twitter q-icon"></i>
                    <span class="q-text">Social</span>
                </a>
                <a class="q-link" onclick="browser.navigate('github.com')">
                    <i class="fab fa-github q-icon"></i>
                    <span class="q-text">Dev</span>
                </a>
            </div>
        </div>
    </div>

    <div class="overlay-panel" id="panel-settings">
        <div class="panel-header">
            <h3><i class="fas fa-shield-halved"></i> Configuraci칩n</h3>
            <button class="icon-btn" onclick="ui.closePanels()"><i class="fas fa-times"></i></button>
        </div>
        <div class="panel-content">
            <h4 style="color:var(--accent)">Privacidad & Seguridad</h4>
            <div class="setting-item">
                <span>Bloquear Rastreadores</span>
                <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
            </div>
            <div class="setting-item">
                <span>Forzar HTTPS</span>
                <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
            </div>
            <div class="setting-item">
                <span>Sin Cookies (Modo Estricto)</span>
                <div class="toggle-switch" onclick="this.classList.toggle('active')"></div>
            </div>
            
            <h4 style="color:var(--accent); margin-top:30px;">Apariencia</h4>
            <div class="setting-item">
                <span>Modo Oscuro Profundo</span>
                <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
            </div>
            <div class="setting-item">
                <span>Animaciones UI</span>
                <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
            </div>

            <button style="width:100%; padding:15px; margin-top:30px; background:var(--danger); border:none; color:white; border-radius:10px; cursor:pointer;" onclick="dataManager.clearAll()">
                <i class="fas fa-trash"></i> BORRAR TODOS LOS DATOS
            </button>
        </div>
    </div>

    <div class="overlay-panel" id="panel-history">
        <div class="panel-header">
            <h3><i class="fas fa-clock-rotate-left"></i> Historial</h3>
            <button class="icon-btn" onclick="ui.closePanels()"><i class="fas fa-times"></i></button>
        </div>
        <div class="panel-content" id="history-list">
            </div>
    </div>

    <div class="toast" id="toast">Acci칩n completada</div>

<script>
    /**
     * ==========================================
     * ALEXBROWSER CORE - JAVASCRIPT ENGINE
     * Versi칩n: Ultimate 1.0
     * ==========================================
     */

    // --- 1. GESTOR DE DATOS (Persistencia Local) ---
    const dataManager = {
        saveHistory: (url, title) => {
            if(!url || url === 'about:blank') return;
            let history = JSON.parse(localStorage.getItem('ab_history') || '[]');
            const entry = { url, title, time: new Date().toLocaleTimeString() };
            history.unshift(entry);
            if(history.length > 50) history.pop(); // Mantener solo 50
            localStorage.setItem('ab_history', JSON.stringify(history));
            ui.renderHistory();
        },
        getHistory: () => {
            return JSON.parse(localStorage.getItem('ab_history') || '[]');
        },
        clearAll: () => {
            localStorage.clear();
            ui.showToast("Datos eliminados correctamente");
            setTimeout(() => location.reload(), 1000);
        }
    };

    // --- 2. MOTOR DE NAVEGACI칍N ---
    class BrowserEngine {
        constructor() {
            this.tabs = [];
            this.activeTabId = null;
            this.idCounter = 0;
            this.homeUrl = 'about:start';
        }

        init() {
            this.newTab(); // Crear pesta침a inicial
            document.getElementById('url-input').addEventListener('keypress', (e) => {
                if(e.key === 'Enter') this.navigate();
            });
            ui.renderHistory();
        }

        // Crear nueva pesta침a
        newTab(url = this.homeUrl) {
            this.idCounter++;
            const tabId = this.idCounter;
            
            // 1. Crear Objeto Pesta침a
            const tabData = {
                id: tabId,
                title: 'Nueva Pesta침a',
                url: url
            };
            this.tabs.push(tabData);

            // 2. Crear Elemento DOM Iframe
            const iframe = document.createElement('iframe');
            iframe.className = 'browser-view';
            iframe.id = `view-${tabId}`;
            // Hack para permitir fullscreen y permisos
            iframe.setAttribute('allowfullscreen', 'true');
            iframe.setAttribute('allow', 'geolocation; microphone; camera; midi; encrypted-media;');
            document.getElementById('viewport').appendChild(iframe);

            // 3. Crear Bot칩n Pesta침a
            this.activeTabId = tabId;
            this.renderTabs();
            
            if(url !== this.homeUrl) {
                this.navigate(url);
            } else {
                this.switchTab(tabId);
            }
        }

        // Cerrar pesta침a
        closeTab(e, id) {
            e.stopPropagation(); // Evitar click en la pesta침a
            if(this.tabs.length === 1) return; // No cerrar la 칰ltima

            // Eliminar del array
            this.tabs = this.tabs.filter(t => t.id !== id);
            
            // Eliminar DOM
            const frame = document.getElementById(`view-${id}`);
            if(frame) frame.remove();

            // Cambiar foco si cerramos la activa
            if(this.activeTabId === id) {
                this.activeTabId = this.tabs[this.tabs.length - 1].id;
            }
            
            this.renderTabs();
            this.switchTab(this.activeTabId);
        }

        // Cambiar de pesta침a
        switchTab(id) {
            this.activeTabId = id;
            
            // Ocultar todos los frames
            document.querySelectorAll('.browser-view').forEach(el => el.classList.remove('active'));
            document.getElementById('start-page').classList.remove('active');

            const currentTab = this.tabs.find(t => t.id === id);
            
            if(currentTab.url === 'about:start') {
                document.getElementById('start-page').classList.add('active');
                document.getElementById('url-input').value = "";
            } else {
                const frame = document.getElementById(`view-${id}`);
                frame.classList.add('active');
                document.getElementById('url-input').value = currentTab.url;
            }

            this.renderTabs();
        }

        // L칩gica Principal de Navegaci칩n
        navigate(inputVal = null) {
            let query = inputVal || document.getElementById('url-input').value.trim();
            if(!query) return;

            // Actualizar pesta침a actual
            const currentTab = this.tabs.find(t => t.id === this.activeTabId);
            
            let finalUrl = "";
            
            // Detecci칩n: 쮼s URL o B칰squeda?
            const isUrl = query.includes('.') && !query.includes(' ');
            
            if(isUrl) {
                // Es URL
                finalUrl = query.startsWith('http') ? query : 'https://' + query;
            } else {
                // Es B칰squeda -> Usamos DuckDuckGo para privacidad (Muestra im치genes y links)
                // Par치metros: kae=d (tema oscuro), kp=-2 (sin safe search estricto), k1=-1 (sin anuncios)
                finalUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}&kae=d&k1=-1&ko=-1`;
            }

            // Actualizar Datos
            currentTab.url = finalUrl;
            currentTab.title = isUrl ? query : `游댌 ${query}`;
            
            // Cargar en Iframe
            document.getElementById('start-page').classList.remove('active');
            const frame = document.getElementById(`view-${this.activeTabId}`);
            frame.classList.add('active');
            frame.src = finalUrl;

            // Actualizar UI
            document.getElementById('url-input').value = finalUrl;
            this.renderTabs();
            dataManager.saveHistory(finalUrl, currentTab.title);
        }

        reload() {
            const frame = document.getElementById(`view-${this.activeTabId}`);
            if(frame.src) frame.src = frame.src;
        }

        goHome() {
            const currentTab = this.tabs.find(t => t.id === this.activeTabId);
            currentTab.url = 'about:start';
            currentTab.title = 'Inicio';
            this.switchTab(this.activeTabId);
        }

        goBack() { history.back(); } // Limitado en iframes
        goForward() { history.forward(); } // Limitado en iframes

        // Renderizado de la barra de pesta침as
        renderTabs() {
            const container = document.getElementById('tabs-container');
            container.innerHTML = ''; // Limpiar

            this.tabs.forEach(tab => {
                const tabEl = document.createElement('div');
                tabEl.className = `tab ${tab.id === this.activeTabId ? 'active' : ''}`;
                tabEl.onclick = () => this.switchTab(tab.id);
                
                tabEl.innerHTML = `
                    <i class="fas fa-globe"></i>
                    <span style="max-width:100px; overflow:hidden; white-space:nowrap;">${tab.title}</span>
                    <div class="tab-close" onclick="browser.closeTab(event, ${tab.id})">&times;</div>
                `;
                container.appendChild(tabEl);
            });

            // Bot칩n Nueva Pesta침a
            const newBtn = document.createElement('div');
            newBtn.className = 'new-tab-btn';
            newBtn.innerHTML = '<i class="fas fa-plus"></i>';
            newBtn.onclick = () => this.newTab();
            container.appendChild(newBtn);
        }
    }

    // --- 3. GESTOR DE INTERFAZ (UI) ---
    const ui = {
        togglePanel: (id) => {
            const panel = document.getElementById(`panel-${id}`);
            const isOpen = panel.classList.contains('open');
            ui.closePanels(); // Cerrar otros primero
            if(!isOpen) panel.classList.add('open');
        },
        closePanels: () => {
            document.querySelectorAll('.overlay-panel').forEach(p => p.classList.remove('open'));
        },
        renderHistory: () => {
            const list = dataManager.getHistory();
            const container = document.getElementById('history-list');
            if(list.length === 0) {
                container.innerHTML = '<div style="text-align:center; color:#555; margin-top:20px;">Sin historial reciente</div>';
                return;
            }
            container.innerHTML = list.map(item => `
                <div class="history-item" onclick="browser.navigate('${item.url}'); ui.closePanels()">
                    <i class="fas fa-globe" style="color:var(--accent)"></i>
                    <div style="flex:1">
                        <div style="font-size:13px; font-weight:bold;">${item.title}</div>
                        <div style="font-size:10px; opacity:0.6">${item.url.substring(0,30)}...</div>
                    </div>
                    <span class="h-time">${item.time}</span>
                </div>
            `).join('');
        },
        showToast: (msg) => {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }
    };

    // INICIALIZACI칍N
    const browser = new BrowserEngine();
    window.onload = () => browser.init();

</script>
</body>
</html>
